# Example: Pressure-based exhaust fan
# Maintains slight negative pressure in an enclosure using a BMx280 sensor.

[pressure_fan exhaust]
# Fan output
pin: <your_fan_pin>
min_speed: 0.0
max_speed: 1.0

# Simple robust controller
control: step
sample_window_sec: 60.0
drop_outliers: 1
decision_period: 60.0
band_pa: 0.5
step_speed: 0.05

# Target vacuum (Pa)
# 0 keeps the fan off until set via gcode
# target_delta: 10.0

# Baseline capture at startup (optional)
# auto_set_baseline: true

# BMx280 sensor configuration
sensor_type: bme280
# i2c_mcu: mcu
# i2c_bus: i2c1a
# i2c_address: 0x76
bme280_oversample_pressure: 5
bme280_iir_filter: 0

# Usage:
# 1) At rest: SET_PRESSURE_BASELINE PRESSURE_FAN=exhaust
# 2) Start control: SET_PRESSURE_FAN_TARGET PRESSURE_FAN=exhaust TARGET_DELTA=10
# 3) Query: QUERY_PRESSURE_FAN PRESSURE_FAN=exhaust
